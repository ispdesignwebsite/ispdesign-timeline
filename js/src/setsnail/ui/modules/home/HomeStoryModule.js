function HomeStoryModule(t,e,o){function n(){d=S*C,u.style.width=u.getWidth()+"px",u.style.height=f+"px"}function r(){for(var t=0;t<C;t++){var e=h[t];e.setExpandedWidth(S),e.setCollapsedWidth(O),e.setHeight(f),e.setRatioOffset(t),o?e.setRatio(c,!0):e.setRatioNoOffset(1,!0),TweenMax.set(e,{x:S*t})}}function i(){var t=Assets.SCROLL_CONTROLLER.currentScroll.y,e=t,o=d,n=e/o;u.setToRatio(n)}function s(){var e=ContentManager.getChildrenByAttr(t,"name","story"),n=l(e),r=new TextAreaModel;r.maxFontSize=18,BrowserDetect.MOBILE&&(r.maxFontSize=r.minFontSize=13),C=e.length;for(var i=0;i<C;i++){var s=new HomeStory(e[i],C-i,r);if(s.onStoryClick=a,n==i&&s.setBodyModelController(),h.push(s),u.appendChild(s),s.init(),o&&i==C-1){for(var d=[],f=0;f<3;f++)d.push(h[C-2-f]);s.reverseStories(d)}}}function a(t){null!=u.onStoryClick&&u.onStoryClick(C-t+1)}function l(t){for(var e=0,o=-1,n=t.length,r=0;r<n;r++){var i=ContentManager.getChildByAttr(t[r],"name","body").innerHTML;i.length>e&&(e=i.length,o=r)}return o}var u=Snail.extend(new Module);u.style.backgroundColor=UIColors.WHITE,u.onStoryClick;var d=0,f=0,c=0,C=0,S=0,O=0,h=[],L=0;return u.init=function(){u.super.init(),s(),Assets.SCROLL_CONTROLLER.addEventListener(ScrollController.ON_SCROLL_MOVE,i)},u.resize_mobile=function(t,o){BrowserDetect.DESKTOP?u.resize_desktop(t,o):(S=t*e,O=1*t,f=o,n(),r())},u.resize_tablet=function(t,o){BrowserDetect.DESKTOP?u.resize_desktop(t,o):(S=t*e,O=.3*t,f=o,n(),r())},u.resize_desktop=function(t,o){S=t*e,O=.2*t,f=o,n(),r(),u.setToRatio(L)},u.getExpandedStoryWidth=function(){return S},u.getWidth=function(){return d},u.getNumOfStories=function(){return C},u.kill=function(){Assets.SCROLL_CONTROLLER.removeEventListener(ScrollController.ON_SCROLL_MOVE,i)},u.setToRatio=function(t){if(o){L=t;var e=Math.floor(t*C)-3;e<0&&(e=0);var n=e+7;n>C&&(n=C,!0);for(var r=S*e,i=e;i<n;i++){var s=h[i];s.setRatio(t*C),TweenMax.set(s,{x:r}),r+=s.getWidth()}}},u}