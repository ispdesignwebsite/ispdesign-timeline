function RetinaImage(e,t,n,i){function l(){if(E)if("insideBox"===O){var e=P/x,t=L/b;e>t?(C=b,w=Math.ceil(b*e)):(e=x/P,C=Math.ceil(L*e),w=L)}else if("auto"===b){if(null!==L){e=x/P;C=Math.ceil(L*e),w=L}}else if("auto"===L){if(null!==b){e=P/x;C=b,w=Math.ceil(b*e)}}else null!==b&&(C=b),null!==L&&(w=L);else null!==b&&(C=b),null!==L&&(w=L);o(C)&&(0==C&&(C=x),M&&(p.width=C),g.style.width=C+"px"),o(w)&&(0==w&&(w=P),M&&(p.height=w),g.style.height=w+"px"),r(),null!=f&&o(C)&&o(w)&&f.setSize(C,w),y.style.width=b+"px",y.style.height=L+"px"}function o(e){return!isNaN(e-0)&&null!==e&&""!==e&&!1!==e}function r(){if(M){var e=0,t=0;if("center/center"===A&&(e=.5,t=.5),null!=C){var n=0;null!=b&&(n=b),p.style.left=Math.floor(n*e-C*e)+"px"}if(null!=w){var i=0;null!=L&&(i=L),p.style.top=Math.floor(i*t-w*t)+"px"}}}function s(){p&&(y.removeChild(p),g.removeChild(y),p=null);var e=v;if(null!==m){var t=v.split("."),n=t.pop();e=t.join(".")+m.getAssetScaleStr()+"."+n}p=new Image,p.style.visibility="hidden",p.style.position="absolute",y.style.position="absolute",y.appendChild(p),g.appendChild(y),null==f?p.addEventListener("load",c):y.appendChild(f),p.addEventListener("error",a),null!=f?(p.onProgress=u,p.load(e)||p.addEventListener("load",c)):p.src=e}function a(e){return h(H),!0}function u(e){f.setProgress(e)}function d(e,t){var n=m?m.getAssetScalePercent():1;o(e)&&(x=e*n,p.width=x),o(t)&&(P=t*n,p.height=P),E=!0}function c(){p.removeEventListener("load",c),p.removeEventListener("error",a),d(p.width,p.height),null!=f&&(o(C)&&TweenMax.set(p,{x:C}),TweenMax.to(p,1,{x:0,ease:Expo.easeInOut}),TweenMax.to(f,1,{x:-C,onComplete:function(){y.removeChild(f),f=null,null!=g.onPreloaderAnimationDone&&g.onPreloaderAnimationDone()},ease:Expo.easeInOut})),M=!0,l(),p.style.visibility="visible",h(R)}function h(e){null!==e&&(e.length?e(g):e(),e=null)}var g=document.createElement("div");g.style.position="absolute",g.onPreloaderAnimationDone;var p,f,v=e,m=t||null,y=document.createElement("div");y.id="MidContainer";var E=!1,C=0,w=0,x=0,P=0,b=null,L=null,M=!1,O="",R=n||null,H=i||null,A="";return g.init=function(){s(),null!==m&&m.addEventListener(RetinaHandleEvents.CHANGE,s)},g.kill=function(){null!==m&&m.removeEventListener(RetinaHandleEvents.CHANGE,s)},g.getWidth=function(){return C},g.getHeight=function(){return w},g.setSizeByAttribute=function(e){var t=parseInt(e.getAttribute("width")),n=parseInt(e.getAttribute("height"));g.getOriginalWidth()<=0&&g.getOriginalHeight()<=0&&d(t,n),o(t)&&o(n)?g.setSize(t,n):(o(t)&&g.setWidth(t),o(n)&&g.setHeight(n))},g.hasSize=function(){return g.getWidth()>0&&g.getHeight()>0},g.setSize=function(e,t){b=e,L=t,l()},g.setWidth=function(e){b=e,l()},g.setHeight=function(e){L=e,l()},g.setResizeMode=function(e){O=e,y.style.overflow="insideBox"===O?"hidden":"visible",l()},g.getContent=function(){return p},g.setPreloader=function(e){f=e,null!=p?(p.removeEventListener("load",c),p.onProgress=u,p.load(v)?f.onEaseComplete=c:p.addEventListener("load",c)):f.onEaseComplete=c,y.appendChild(f)},g.setPosition=function(e){A=e,r()},g.getOriginalWidth=function(){return M?x:0},g.getOriginalHeight=function(){return M?P:0},g.getWidthRatio=function(){return M?g.getOriginalHeight()/g.getOriginalWidth():0},g.isLoaded=function(){return M},g}function SlidePreloader(e,t){function n(){a>=.99&&(l.style.display="none",null!=i.onEaseComplete&&i.onEaseComplete())}var i=new ImagePreloader,l=document.createElement("div");l.style.position="absolute",l.style.backgroundColor=null!=e?e:UIColors.PRELOADER_COLOR_ONE;var o=document.createElement("div");o.style.position="absolute",o.style.backgroundColor=null!=t?t:UIColors.PRELOADER_COLOR_TWO,i.appendChild(l),i.appendChild(o);var r,s,a=0;i.onEaseComplete,i.setSize=function(e,t){r=Math.ceil(e),s=Math.ceil(t),l.style.width=i.style.width=r+"px",l.style.height=i.style.height=s+"px",a>=.99?o.style.height=s+"px":(TweenMax.set(o,{width:r*a}),o.style.height=s+"px")};var u=0;return i.setProgress=function(e){u!=e&&(u=e,a=u/100,a>=.99&&(a=1),TweenMax.to(o,.75+.5*Math.random(),{width:r*a,onComplete:n}),o.style.height=s+"px")},i}function ImagePreloader(){var e=document.createElement("div");return e.style.position="absolute",e.setSize=function(e,t){},e.setProgress=function(e){},e}Image.prototype.load=function(e,t){var n=this;if(!window.XMLHttpRequest)return n.src=e,!1;var i=new XMLHttpRequest;return n.completedPercentage=0,i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(e){var l=i.getAllResponseHeaders(),o=l.match(/^Content-Type\:\s*(.*?)$/im),r=o[1]||"image/png",s=new Blob([this.response],{type:r});n.src=window.URL.createObjectURL(s),t&&t(this)},i.onprogress=function(e){e.lengthComputable&&(n.completedPercentage=parseInt(e.loaded/e.total*100)),null!=n.onProgress&&n.onProgress(n.completedPercentage)},i.onloadstart=function(){n.completedPercentage=0},i.onloadend=function(){n.completedPercentage=100},i.send(),!0};